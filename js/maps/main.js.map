{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","db","firebase","initializeApp","database","app","m_ocean","m_Constants","ShipHealthAttr","ShipColorAttr","ShipNameAttr","CameraYOffset","OceanYOffset","OceanPadding","ShipYOffset","SinkDistance","BulletArc","WaitTimePerTileMoved","WaitTimeBetweenAction","m_input","m_ships","m_chain","m_entity","init","ships","input","turns","ocean","map","preprocess","doc","document","getElementById","track","createElement","setAttribute","appendChild","render","setTimeout","simulate","data","translate","d","res","hasOwnProperty","atX","atY","x","z","y","actions","index","Math","floor","width","depth","density","console","log","forEach","entry","push","chain","id","type","shipData","camera","atan","String","ship","dataset","name","owner","health","hull","firepower","speed","range","heart","parseInt","color","shipInstance","sinkShip","Promise","resolve","reject","shipDom","debug","point1","point2","addEventListener","event","removeAttribute","parentNode","removeChild","hasChildNodes","childNodes","fireShip","bullet","source","arc","target","atZ","tmp","aimShip","hitShip","element","moveShip","point","previous","xDistance","zDistance","abs","dur","notStop","current","shift","then","done","catch","err","error","vex","dialog","alert","getStrCoord","coord","offsetY","getShips","getOcean","battleship","params","qs","split","join","tokens","re","exec","decodeURIComponent","getQueryParams","location","search","getDataFromCode","ref","once","snapshot","gameData","val","getCode","message","prompt","callback","value"],"mappings":"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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\n// Initialize Firebase\nvar config = {\n\tapiKey: \"AIzaSyA9EYUXVL5WAh6Aam1qXlWyvi3b7HLcZ1U\",\n\tauthDomain: \"esigamma.firebaseapp.com\",\n\tdatabaseURL: \"https://esigamma.firebaseio.com\",\n\tprojectId: \"esigamma\",\n\tstorageBucket: \"esigamma.appspot.com\",\n\tmessagingSenderId: \"734163636039\"\n};\nvar FirebaseInstance = firebase.initializeApp(config, \"Davy Jones' Locker\");\n\nvar db = FirebaseInstance.database();\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction battleship() {\n\n\t// private\n\tvar m_Constants = {\n\t\tShipHealthAttr: 'data-ship_health',\n\t\tShipColorAttr: 'data-ship_color',\n\t\tShipNameAttr: 'data-ship_name',\n\t\tCameraYOffset: 8,\n\t\tOceanYOffset: 0,\n\t\tOceanPadding: 10,\n\t\tShipYOffset: 0,\n\t\tSinkDistance: 5,\n\t\tBulletArc: 2,\n\t\tWaitTimePerTileMoved: 300,\n\t\tWaitTimeBetweenAction: 100 // in miliseconds\n\t};\n\n\tvar m_input = {};\n\n\tvar m_ships = []; // stores formatted json of ship initialization\n\tvar m_chain = []; // stores chainable actions in a turn\n\tvar m_entity = {}; // object with id to html dom element of ships\n\n\tvar m_test = 0;\n\n\tvar m_ocean;\n\n\t// public\n\tvar app = {\n\n\t\tinit: function init() {\n\t\t\t// default access of data when there are no connectivity\n\t\t\tm_input = { \"ships\": input.init.ships, \"turns\": input.turns, \"ocean\": input.init.map };\n\t\t\tapp.preprocess(m_input);\n\n\t\t\tvar doc = document.getElementById('scene');\n\t\t\tvar track = document.createElement('a-curve');\n\t\t\ttrack.setAttribute('id', 'track');\n\t\t\ttrack.setAttribute('type', 'Line');\n\t\t\tdoc.appendChild(track);\n\n\t\t\tapp.render(m_ships);\n\n\t\t\tsetTimeout(function () {\n\t\t\t\tapp.simulate();\n\t\t\t}, 10000);\n\t\t\t// call function to wait a bit before starting simulation\n\t\t\t//app.simulate();\n\t\t},\n\n\t\tpreprocess: function preprocess(data) {\n\t\t\tvar translate = function translate(d) {\n\t\t\t\tvar res = d;\n\t\t\t\tif (res.hasOwnProperty(\"atX\") && res.hasOwnProperty(\"atY\")) {\n\t\t\t\t\tres['atX'] = 4 * d.atX;\n\t\t\t\t\tres['atZ'] = 4 * d.atY; // make sure to move the y property before overriding it\n\t\t\t\t\tres['atY'] = m_Constants.ShipYOffset;\n\t\t\t\t}\n\t\t\t\tres.x = 4 * d.x;\n\t\t\t\tres.z = 4 * d.y; // make sure to move the y property before overriding it\n\t\t\t\tres.y = m_Constants.ShipYOffset;\n\t\t\t\treturn res;\n\t\t\t};\n\t\t\tvar actions = [];\n\t\t\tvar index = 0;\n\n\t\t\t// preprocess initial map information\n\t\t\t// m_ocean = { \"x\": ((4*Math.floor(data.ocean.x/2))-2) + (m_Constants.OceanPadding/2),\n\t\t\t//             \"y\": m_Constants.OceanYOffset, \n\t\t\t//             \"z\": ((4*Math.floor(data.ocean.y/2))) + (m_Constants.OceanPadding/2), \n\t\t\t//             \"width\": (4*data.ocean.x)+m_Constants.OceanPadding, \n\t\t\t//             \"depth\": (4*data.ocean.y)+m_Constants.OceanPadding, \n\t\t\t//             \"density\": Math.min(3*data.ocean.x, 3*data.ocean.y)+m_Constants.OceanPadding\n\t\t\t//         };\n\t\t\tm_ocean = { \"x\": 4 * Math.floor(data.ocean.x / 2) - 2,\n\t\t\t\t\"y\": m_Constants.OceanYOffset,\n\t\t\t\t\"z\": 4 * Math.floor(data.ocean.y / 2),\n\t\t\t\t\"width\": 200,\n\t\t\t\t\"depth\": 200,\n\t\t\t\t\"density\": 120\n\t\t\t};\n\n\t\t\tconsole.log(data);\n\t\t\t// preprocess initial ship information\n\t\t\tdata.ships.forEach(function (entry) {\n\t\t\t\tm_ships.push(translate(entry));\n\t\t\t});\n\n\t\t\t// preprocess actions and turns information\n\t\t\twhile (index < data.turns.length) {\n\t\t\t\tvar chain = true;\n\t\t\t\twhile (chain) {\n\t\t\t\t\tif (index === data.turns.length) break;\n\n\t\t\t\t\tif (actions.length === 0) {\n\t\t\t\t\t\tactions.push(translate(data.turns[index]));\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\t\t\t\t\t// Ship id and action type has to be the same to be considered a chain-able action\n\t\t\t\t\telse if (actions[0].id === data.turns[index].id && actions[0].type === data.turns[index].type) {\n\t\t\t\t\t\t\tif (actions[0].type === \"MOVE\") {\n\t\t\t\t\t\t\t\tactions.push(translate(data.turns[index]));\n\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Firing must be at the same coordinates to be considered a chain-able action\n\t\t\t\t\t\t\telse if (actions[0].type === \"FIRE\" && actions[0].atX === 4 * data.turns[index].atX && actions[0].atY === 4 * data.turns[index].atY) {\n\t\t\t\t\t\t\t\t\tactions.push(translate(data.turns[index]));\n\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t} else if (actions[0].type === \"SINK\") {\n\t\t\t\t\t\t\t\t\tactions.push(translate(data.turns[index]));\n\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tchain = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchain = false;\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// add action chain to variable\n\t\t\t\tm_chain.push({ \"type\": actions[0].type, \"actions\": actions });\n\t\t\t\t// reset chain actions\n\t\t\t\tactions = [];\n\t\t\t}\n\t\t\tconsole.log(m_chain);\n\t\t},\n\n\t\t// Displays the ocean, and ships\n\t\t// TODO: check the edge cases with the map edges/sizes\n\t\trender: function render(shipData) {\n\t\t\tvar doc = document.getElementById('scene'); // <a-scene> reference\n\n\t\t\t// re-position camera: camera must be already present when html loads\n\t\t\tvar camera = document.getElementById('camera');\n\t\t\t//camera.setAttribute('position', m_ocean.x + \" \" + m_ocean.y + \" \" + m_ocean.z);\n\t\t\tcamera.setAttribute('position', m_ocean.x + \" \" + m_ocean.y + \" \" + (m_ocean.z + 1.5 * m_ocean.x));\n\t\t\tcamera.setAttribute('camera', 'userHeight: ' + m_Constants.CameraYOffset);\n\t\t\tcamera.setAttribute('rotation', -Math.atan(m_Constants.CameraYOffset / (m_ocean.z + m_ocean.x)));\n\n\t\t\t// Generate Map\n\t\t\t// TODO: Possible edge cases with the map edge not being big enough\n\t\t\tvar map = document.createElement('a-ocean');\n\n\t\t\tmap.setAttribute('position', m_ocean.x + \" \" + m_ocean.y + \" \" + m_ocean.z);\n\t\t\tmap.setAttribute('width', String(m_ocean.width));\n\t\t\tmap.setAttribute('depth', String(m_ocean.depth));\n\t\t\tmap.setAttribute('density', String(m_ocean.density));\n\t\t\tdoc.appendChild(map);\n\n\t\t\t// Spawn Ships\n\t\t\tshipData.forEach(function (entry) {\n\t\t\t\tvar ship = document.createElement('a-entity');\n\n\t\t\t\tship.dataset.id = entry.id;\n\t\t\t\tship.dataset.name = entry.name;\n\t\t\t\tship.dataset.owner = entry.owner;\n\t\t\t\tship.dataset.x = entry.x;\n\t\t\t\tship.dataset.y = entry.y;\n\t\t\t\tship.dataset.z = entry.z;\n\t\t\t\tship.dataset.health = entry.hull;\n\t\t\t\tship.dataset.hull = entry.hull;\n\t\t\t\tship.dataset.firepower = entry.firepower;\n\t\t\t\tship.dataset.speed = entry.speed;\n\t\t\t\tship.dataset.range = entry.range;\n\n\t\t\t\tvar heart = \"\";\n\t\t\t\tfor (var i = 0; i < parseInt(entry.hull); i++) {\n\t\t\t\t\theart += \" •\";\n\t\t\t\t}\n\n\t\t\t\tship.setAttribute('position', entry.x + \" \" + entry.y + \" \" + entry.z);\n\t\t\t\tship.setAttribute('template', 'src: #boat-template');\n\t\t\t\t// ${variable} <- variable name be lower case\n\t\t\t\tship.setAttribute('data-ship_color', 'color: ' + entry.color + '; metalness: 0.4;');\n\t\t\t\tship.setAttribute('data-ship_name', 'value: ' + entry.name + '; font: #play;');\n\t\t\t\tship.setAttribute(m_Constants.ShipHealthAttr, 'value: ' + heart + ';');\n\n\t\t\t\tvar shipInstance = doc.appendChild(ship);\n\t\t\t\tm_entity[entry.id] = shipInstance;\n\t\t\t});\n\t\t},\n\n\t\tsinkShip: function sinkShip(data) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar doc = document.getElementById('scene');\n\t\t\t\tvar track = document.getElementById('track');\n\t\t\t\tvar shipDom = m_entity[data[0].id];\n\n\t\t\t\tvar debug = document.createElement('a-draw-curve');\n\t\t\t\tdebug.setAttribute('curveref', '#track');\n\t\t\t\tdebug.setAttribute('material', 'shader: line; color: black;');\n\t\t\t\tdoc.appendChild(debug);\n\n\t\t\t\tvar point1 = document.createElement('a-curve-point');\n\t\t\t\tvar point2 = document.createElement('a-curve-point');\n\t\t\t\tpoint1.setAttribute('position', data[0].x + \" \" + data[0].y + \" \" + data[0].z);\n\t\t\t\tpoint2.setAttribute('position', data[0].x + \" \" + (data[0].y - m_Constants.SinkDistance) + \" \" + data[0].z);\n\t\t\t\ttrack.appendChild(point1);\n\t\t\t\ttrack.appendChild(point2);\n\n\t\t\t\tshipDom.setAttribute('alongpath', 'curve: #track; rotate: true; constraint: 0 1 0; delay: ' + m_Constants.WaitTimeBetweenAction + '; dur: 3000;');\n\n\t\t\t\tvar done = function done(event) {\n\t\t\t\t\tshipDom.removeAttribute('alongpath');\n\t\t\t\t\tif (debug.parentNode) {\n\t\t\t\t\t\tdoc.removeChild(debug);\n\t\t\t\t\t}\n\n\t\t\t\t\twhile (track.hasChildNodes()) {\n\t\t\t\t\t\ttrack.removeChild(track.childNodes[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\t//shipDom.removeEventListener('movingended', done);\n\n\t\t\t\t\tif (shipDom.parentNode) {\n\t\t\t\t\t\tdoc.removeChild(shipDom);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(event);\n\t\t\t\t};\n\n\t\t\t\tshipDom.addEventListener('movingended', done);\n\t\t\t\t// resolve();\n\t\t\t});\n\t\t},\n\n\t\t// Data passed in are one ships action of firing at one and only one coordinate\n\t\tfireShip: function fireShip(data) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar doc = document.getElementById('scene');\n\t\t\t\tvar track = document.getElementById('track');\n\n\t\t\t\tvar bullet = document.createElement('a-sphere');\n\t\t\t\tvar source = document.createElement('a-curve-point');\n\t\t\t\tvar arc = document.createElement('a-curve-point');\n\t\t\t\tvar target = document.createElement('a-curve-point');\n\t\t\t\tbullet.setAttribute('color', 'gray');\n\t\t\t\tbullet.setAttribute('radius', '0.1');\n\t\t\t\tbullet.setAttribute('position', data[0].x + \" \" + data[0].y + \" \" + data[0].z);\n\t\t\t\tsource.setAttribute('position', data[0].x + \" \" + data[0].y + \" \" + data[0].z);\n\t\t\t\ttarget.setAttribute('position', data[0].atX + \" \" + data[0].atY + \" \" + data[0].atZ);\n\t\t\t\tarc.setAttribute('position', (data[0].atX + data[0].x) / 2 + \" \" + ((data[0].atY + data[0].y) / 2 + m_Constants.BulletArc) + \" \" + (data[0].atZ + data[0].z) / 2);\n\t\t\t\ttrack.appendChild(source);\n\t\t\t\ttrack.appendChild(arc);\n\t\t\t\ttrack.appendChild(target);\n\n\t\t\t\tvar debug = document.createElement('a-draw-curve');\n\t\t\t\tdebug.setAttribute('curveref', '#track');\n\t\t\t\tdebug.setAttribute('material', 'shader: line; color: red;');\n\t\t\t\tdoc.appendChild(debug);\n\n\t\t\t\tvar tmp = doc.appendChild(bullet);\n\t\t\t\ttmp.setAttribute('alongpath', 'curve: #track; rotate: true; constant: 0 0 1; delay: 200; dur: 500');\n\n\t\t\t\tvar done = function done(event) {\n\t\t\t\t\ttmp.removeAttribute('alongpath');\n\t\t\t\t\tif (debug.parentNode) {\n\t\t\t\t\t\tdoc.removeChild(debug);\n\t\t\t\t\t}\n\t\t\t\t\twhile (track.hasChildNodes()) {\n\t\t\t\t\t\ttrack.removeChild(track.childNodes[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\t//tmp.removeEventListener('movingended', done);\n\t\t\t\t\tif (tmp.parentNode) {\n\t\t\t\t\t\tdoc.removeChild(tmp);\n\t\t\t\t\t}\n\t\t\t\t\tresolve(event);\n\t\t\t\t};\n\n\t\t\t\ttmp.addEventListener('movingended', done);\n\t\t\t\t//resolve();\n\t\t\t});\n\t\t},\n\n\t\taimShip: function aimShip(data) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tvar ship = m_entity[data[0].id];\n\t\t\t\t\tconsole.log(\"aim: \", ship);\n\t\t\t\t\tresolve();\n\t\t\t\t}, 3000);\n\t\t\t});\n\t\t},\n\n\t\thitShip: function hitShip(data) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar doc = document.getElementById('scene');\n\t\t\t\tconsole.log('damage: ', data);\n\t\t\t\tvar ship = m_entity[data[0].id];\n\t\t\t\tconsole.log('shipHit: ', ship);\n\n\t\t\t\tvar heart = \"\";\n\t\t\t\tfor (var i = 0; i < data[0].health - 1; i++) {\n\t\t\t\t\theart += \" •\";\n\t\t\t\t}\n\t\t\t\t//var prev = heart + \" •\";\n\t\t\t\tconsole.log('newhp: ', heart);\n\t\t\t\tship.setAttribute(m_Constants.ShipHealthAttr, 'value: asf;');\n\t\t\t\tconsole.log('newShipHit: ', ship);\n\n\t\t\t\tdoc.childNodes.forEach(function (element) {});\n\t\t\t\t// setTimeout(() => {\n\t\t\t\t// \tship.setAttribute(m_Constants.ShipHealthAttr, 'value: '+heart+';');\n\t\t\t\t// }, 300);\n\t\t\t\t// setTimeout(() => {\n\t\t\t\t// \tship.setAttribute(m_Constants.ShipHealthAttr, 'value: '+prev+';');\n\t\t\t\t// }, 300);\n\t\t\t\t// setTimeout(() => {\n\t\t\t\t// \tship.setAttribute(m_Constants.ShipHealthAttr, 'value: '+heart+';');\n\t\t\t\t// }, 300);\n\t\t\t\t// setTimeout(() => {\n\t\t\t\t// \tship.setAttribute(m_Constants.ShipHealthAttr, 'value: '+prev+';');\n\t\t\t\t// }, 300);\n\t\t\t\t// setTimeout(() => {\n\t\t\t\t// \tship.setAttribute(m_Constants.ShipHealthAttr, 'value: '+heart+';');\n\t\t\t\t// }, 300);\n\t\t\t\t//var property = ship.get\n\n\t\t\t\tresolve();\n\t\t\t});\n\t\t},\n\n\t\t// Data passed in must be for movement of one ship\n\t\tmoveShip: function moveShip(data) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tvar shipDom = m_entity[data[0].id]; // html element\n\t\t\t\t// if statement is not working\n\t\t\t\t// if (data.length === 1 && data[0].x === shipDom.dataset.x && data[0].z === shipDom.dataset.z) {\n\t\t\t\t//     // if shipDom tries to move against edge or occupied place\n\t\t\t\t//     alert(\"Skipped\");\n\t\t\t\t//     resolve(\"Skipped\");\n\t\t\t\t// }\n\n\t\t\t\tvar doc = document.getElementById('scene'); // <a-scene> reference\n\t\t\t\tvar track = document.getElementById('track');\n\t\t\t\t//var startCoord = {\"x\": data[0].x};\n\n\t\t\t\tvar debug = document.createElement('a-draw-curve');\n\t\t\t\tdebug.setAttribute('curveref', '#track');\n\t\t\t\tdebug.setAttribute('material', 'shader: line; color: blue;');\n\t\t\t\tdoc.appendChild(debug);\n\n\t\t\t\t// add current location as a starting point of the curve\n\t\t\t\tvar point = document.createElement('a-curve-point');\n\t\t\t\tpoint.setAttribute('position', String(shipDom.dataset.x + \" \" + shipDom.dataset.y + \" \" + shipDom.dataset.z));\n\t\t\t\ttrack.appendChild(point);\n\t\t\t\t// add chain-able goal locations to the curve\n\t\t\t\tvar previous = { 'x': shipDom.dataset.x, 'z': shipDom.dataset.z };\n\t\t\t\tvar xDistance = 0;\n\t\t\t\tvar zDistance = 0;\n\t\t\t\tconsole.log(\"Moving: \", data);\n\t\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t\tpoint = document.createElement('a-curve-point');\n\t\t\t\t\tpoint.setAttribute('position', data[i].x + \" \" + data[i].y + \" \" + data[i].z);\n\t\t\t\t\txDistance += Math.abs(data[i].x - previous.x);\n\t\t\t\t\tzDistance += Math.abs(data[i].z - previous.z);\n\t\t\t\t\tif (i + 1 < data.length && data[i].x === data[i + 1].x && data[i].z === data[i + 1].z) {\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\t\t\t\t\ttrack.appendChild(point);\n\t\t\t\t\tprevious = { 'x': data[i].x, 'z': data[i].z };\n\t\t\t\t}\n\t\t\t\tvar dur = (xDistance + zDistance) * m_Constants.WaitTimePerTileMoved;\n\t\t\t\tshipDom.setAttribute('alongpath', 'curve: #track; rotate: true; constraint: 0 0 1; delay: ' + m_Constants.WaitTimeBetweenAction + '; dur: ' + dur + ';');\n\n\t\t\t\tvar done = function done(event) {\n\t\t\t\t\t// var list = document.getElementByTagName('a-draw-curve');\n\t\t\t\t\t// for (var i = 0; i < list.length; i++) {\n\t\t\t\t\t//     list[0].parentNode.removeChild(list[0]);\n\t\t\t\t\t// }\n\t\t\t\t\tif (debug.parentNode) {\n\t\t\t\t\t\tdoc.removeChild(debug);\n\t\t\t\t\t}\n\n\t\t\t\t\twhile (track.hasChildNodes()) {\n\t\t\t\t\t\ttrack.removeChild(track.childNodes[0]);\n\t\t\t\t\t}\n\n\t\t\t\t\tshipDom.removeAttribute('alongpath');\n\t\t\t\t\tshipDom.dataset.x = data[data.length - 1].x;\n\t\t\t\t\tshipDom.dataset.z = data[data.length - 1].z;\n\t\t\t\t\tshipDom.dataset.y = data[data.length - 1].y;\n\n\t\t\t\t\t//shipDom.removeEventListener('movingended', done);\n\t\t\t\t\tresolve(event);\n\t\t\t\t};\n\n\t\t\t\tshipDom.addEventListener('movingended', done);\n\t\t\t});\n\t\t},\n\n\t\tsimulate: function simulate() {\n\t\t\tconsole.log(\"chain: \", m_chain);\n\t\t\tvar notStop = true;\n\t\t\tif (m_chain.length == 0) {\n\t\t\t\tnotStop = false;\n\t\t\t}\n\t\t\tvar current = m_chain.shift(); // don't shift when length is zero\n\t\t\tif (current && notStop) {\n\t\t\t\tconsole.log(\"current: \", current);\n\t\t\t\tswitch (current.type) {\n\t\t\t\t\tcase \"MOVE\":\n\t\t\t\t\t\tapp.moveShip(current.actions).then(function (done) {\n\t\t\t\t\t\t\t//alert(\"Moved \" + m_chain.length + \" actions left\");\n\t\t\t\t\t\t\tapp.simulate();\n\t\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"FIRE\":\n\t\t\t\t\t\tapp.fireShip(current.actions).then(function (done) {\n\t\t\t\t\t\t\tapp.simulate();\n\t\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\t\tconsole.error(\"error: \", err);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"HIT\":\n\t\t\t\t\t\tapp.hitShip(current.actions).then(function (done) {\n\t\t\t\t\t\t\tapp.simulate();\n\t\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"SINK\":\n\t\t\t\t\t\tapp.sinkShip(current.actions).then(function (done) {\n\t\t\t\t\t\t\t//alert(\"Sunk \"+ m_chain.length + \" actions left\");\n\t\t\t\t\t\t\tapp.simulate();\n\t\t\t\t\t\t}).catch(function (err) {\n\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.log(\"Unknown Action Type \" + current.type + \" in simulate function\");\n\t\t\t\t\t\tapp.simulate();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t//alert(\"Simulation Done\");\n\t\t\t\t\tvex.dialog.alert(\"Simulation Completed.\");\n\t\t\t\t}, 10000);\n\t\t\t}\n\t\t},\n\n\t\t/** translates the coordinate in the java game to this scene's coordinate\n  \tJava Game: Each ship spans one (x, y) unit\n  \tJava Game: Coordinate system has (0, 0) at top left corner (without negatives)\n  \tAFrame Scene: Each ship model is a 4x4 box\n  \tAFrame Scene: Coordinate system is (0, 0) at the center (with negatives)\n  */\n\t\tgetStrCoord: function getStrCoord(coord, offsetY) {\n\t\t\treturn (m_ocean.x - coord.x) * 4 + \" \" + offsetY + \" \" + (m_ocean.y - coord.y) * 4;\n\t\t},\n\n\t\tgetShips: function getShips() {\n\t\t\treturn m_ships;\n\t\t},\n\n\t\tgetOcean: function getOcean() {\n\t\t\treturn m_ocean;\n\t\t}\n\n\t};\n\n\treturn app;\n}\n\nvar app = battleship();\nvar params = getQueryParams(document.location.search);\n\nvar getDataFromCode = function getDataFromCode(code) {\n\tdb.ref('davy-jones-locker/' + code).once('value', function (snapshot) {\n\t\tvar gameData = snapshot.val();\n\t\tif (gameData) {\n\t\t\tinput = gameData;\n\t\t\tapp.init();\n\t\t} else {\n\t\t\tgetCode(\"No data for code \" + code + \". Enter another code:\");\n\t\t\t//app.init();\n\t\t}\n\t}).catch(function (err) {\n\t\tgetCode(\"There was an error. Enter another code:\");\n\t\t//app.init();\n\t});\n};\n\nvar getCode = function getCode(message) {\n\tvex.dialog.prompt({\n\t\tmessage: message,\n\t\tcallback: function callback(value) {\n\t\t\tif (value) {\n\t\t\t\tvar code = value;\n\t\t\t\tgetDataFromCode(code);\n\t\t\t} else {\n\t\t\t\tgetCode(\"No code entered. Enter your code:\");\n\t\t\t}\n\t\t}\n\t});\n};\n\nif (params.code) {\n\tgetDataFromCode(params.code);\n} else {\n\tgetCode(\"Enter Your Code\");\n}\n\n// var BATTLE_SERVER_URL = 'https://battleship-vingkan.c9users.io/1v1?p1=esi17.cs.DestroyerShip&p2=esi17.hli109.Floater';// + Math.ceil(Math.random() * 100);\n\n// $.get(BATTLE_SERVER_URL).then(data => {\n// \tinput = data;\n// \tapp.init();\n// }).done(() => {\n// \tconsole.log(\"Data successfully retrieved from server\");\n// }).fail(() => {\n// \tconsole.log(\"Unable to retrieve data, starting with local data\");\n// \tapp.init();\n// });\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7QUFDQSxJQUFJLFNBQVM7QUFDWixTQUFRLHlDQURJO0FBRVosYUFBWSwwQkFGQTtBQUdaLGNBQWEsaUNBSEQ7QUFJWixZQUFXLFVBSkM7QUFLWixnQkFBZSxzQkFMSDtBQU1aLG9CQUFtQjtBQU5QLENBQWI7QUFRQSxJQUFJLG1CQUFtQixTQUFTLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0Isb0JBQS9CLENBQXZCOztBQUVBLElBQUksS0FBSyxpQkFBaUIsUUFBakIsRUFBVDs7QUFFQSxTQUFTLGNBQVQsQ0FBd0IsRUFBeEIsRUFBNEI7QUFDM0IsTUFBSyxHQUFHLEtBQUgsQ0FBUyxHQUFULEVBQWMsSUFBZCxDQUFtQixHQUFuQixDQUFMO0FBQ0EsS0FBSSxTQUFTLEVBQWI7QUFBQSxLQUNDLE1BREQ7QUFBQSxLQUVDLEtBQUssdUJBRk47QUFHQSxRQUFPLFNBQVMsR0FBRyxJQUFILENBQVEsRUFBUixDQUFoQixFQUE2QjtBQUM1QixTQUFPLG1CQUFtQixPQUFPLENBQVAsQ0FBbkIsQ0FBUCxJQUF3QyxtQkFBbUIsT0FBTyxDQUFQLENBQW5CLENBQXhDO0FBQ0E7QUFDRCxRQUFPLE1BQVA7QUFDQTs7QUFFRCxTQUFTLFVBQVQsR0FBc0I7O0FBRXJCO0FBQ0EsS0FBSSxjQUFjO0FBQ2pCLGtCQUFnQixrQkFEQztBQUVqQixpQkFBZSxpQkFGRTtBQUdqQixnQkFBYyxnQkFIRztBQUlqQixpQkFBZSxDQUpFO0FBS2pCLGdCQUFjLENBTEc7QUFNakIsZ0JBQWMsRUFORztBQU9qQixlQUFhLENBUEk7QUFRakIsZ0JBQWMsQ0FSRztBQVNqQixhQUFXLENBVE07QUFVakIsd0JBQXNCLEdBVkw7QUFXakIseUJBQXVCLEdBWE4sQ0FXVTtBQVhWLEVBQWxCOztBQWNBLEtBQUksVUFBVSxFQUFkOztBQUVBLEtBQUks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Q0FGRCxNQUVPO0FBQ04sU0FBUSxpQkFBUjtBQUNBOztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvLyBJbml0aWFsaXplIEZpcmViYXNlXG52YXIgY29uZmlnID0ge1xuXHRhcGlLZXk6IFwiQUl6YVN5QTlFWVVYVkw1V0FoNkFhbTFxWGxXeXZpM2I3SExjWjFVXCIsXG5cdGF1dGhEb21haW46IFwiZXNpZ2FtbWEuZmlyZWJhc2VhcHAuY29tXCIsXG5cdGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vZXNpZ2FtbWEuZmlyZWJhc2Vpby5jb21cIixcblx0cHJvamVjdElkOiBcImVzaWdhbW1hXCIsXG5cdHN0b3JhZ2VCdWNrZXQ6IFwiZXNpZ2FtbWEuYXBwc3BvdC5jb21cIixcblx0bWVzc2FnaW5nU2VuZGVySWQ6IFwiNzM0MTYzNjM2MDM5XCJcbn07XG52YXIgRmlyZWJhc2VJbnN0YW5jZSA9IGZpcmViYXNlLmluaXRpYWxpemVBcHAoY29uZmlnLCBcIkRhdnkgSm9uZXMnIExvY2tlclwiKTtcblxudmFyIGRiID0gRmlyZWJhc2VJbnN0YW5jZS5kYXRhYmFzZSgpO1xuXG5mdW5jdGlvbiBnZXRRdWVyeVBhcmFtcyhxcykge1xuXHRxcyA9IHFzLnNwbGl0KCcrJykuam9pbignICcpO1xuXHR2YXIgcGFyYW1zID0ge30sXG5cdFx0dG9rZW5zLFxuXHRcdHJlID0gL1s/Jl0/KFtePV0rKT0oW14mXSopL2c7XG5cdHdoaWxlICh0b2tlbnMgPSByZS5leGVjKHFzKSkge1xuXHRcdHBhcmFtc1tkZWNvZGVVUklDb21wb25lbnQodG9rZW5zWzFdKV0gPSBkZWNvZGVVUklDb21wb25lbnQodG9rZW5zWzJdKTtcblx0fVxuXHRyZXR1cm4gcGFyYW1zO1xufVxuXG5mdW5jdGlvbiBiYXR0bGVzaGlwKCkge1xuXHRcblx0Ly8gcHJpdmF0ZVxuXHR2YXIgbV9Db25zdGFudHMgPSB7XG5cdFx0U2hpcEhlYWx0aEF0dHI6ICdkYXRhLXNoaXBfaGVhbHRoJyxcblx0XHRTaGlwQ29sb3JBdHRyOiAnZGF0YS1zaGlwX2NvbG9yJyxcblx0XHRTaGlwTmFtZUF0dHI6ICdkYXRhLXNoaXBfbmFtZScsIFxuXHRcdENhbWVyYVlPZmZzZXQ6IDgsXG5cdFx0T2NlYW5ZT2Zmc2V0OiAwLFxuXHRcdE9jZWFuUGFkZGluZzogMTAsXG5cdFx0U2hpcFlPZmZzZXQ6IDAsXG5cdFx0U2lua0Rpc3RhbmNlOiA1LFxuXHRcdEJ1bGxldEFyYzogMixcblx0XHRXYWl0VGltZVBlclRpbGVNb3ZlZDogMzAwLFxuXHRcdFdhaXRUaW1lQmV0d2VlbkFjdGlvbjogMTAwIC8vIGluIG1pbGlzZWNvbmRzXG5cdH07XG5cblx0dmFyIG1faW5wdXQgPSB7fTtcblx0XG5cdHZhciBtX3NoaXBzID0gW107IC8vIHN0b3JlcyBmb3JtYXR0ZWQganNvbiBvZiBzaGlwIGluaXRpYWxpemF0aW9uXG5cdHZhciBtX2NoYWluID0gW107IC8vIHN0b3JlcyBjaGFpbmFibGUgYWN0aW9ucyBpbiBhIHR1cm5cblx0dmFyIG1fZW50aXR5ID0ge307IC8vIG9iamVjdCB3aXRoIGlkIHRvIGh0bWwgZG9tIGVsZW1lbnQgb2Ygc2hpcHNcblxuXHR2YXIgbV90ZXN0ID0gMDtcblxuXHR2YXIgbV9vY2VhbjsgXG5cblx0Ly8gcHVibGljXG5cdHZhciBhcHAgPSB7XG5cblx0XHRpbml0OiAoKSA9PiB7XG5cdFx0XHQvLyBkZWZhdWx0IGFjY2VzcyBvZiBkYXRhIHdoZW4gdGhlcmUgYXJlIG5vIGNvbm5lY3Rpdml0eVxuXHRcdFx0bV9pbnB1dCA9IHtcInNoaXBzXCI6IGlucHV0LmluaXQuc2hpcHMsIFwidHVybnNcIjogaW5wdXQudHVybnMsIFwib2NlYW5cIjogaW5wdXQuaW5pdC5tYXB9O1xuXHRcdFx0YXBwLnByZXByb2Nlc3MobV9pbnB1dCk7XG5cblx0XHRcdHZhciBkb2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NlbmUnKTtcblx0XHRcdHZhciB0cmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtY3VydmUnKTtcblx0XHRcdHRyYWNrLnNldEF0dHJpYnV0ZSgnaWQnLCAndHJhY2snKTtcblx0XHRcdHRyYWNrLnNldEF0dHJpYnV0ZSgndHlwZScsICdMaW5lJyk7XG5cdFx0XHRkb2MuYXBwZW5kQ2hpbGQodHJhY2spO1xuXG5cdFx0XHRhcHAucmVuZGVyKG1fc2hpcHMpO1xuXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0YXBwLnNpbXVsYXRlKCk7XG5cdFx0XHR9LCAxMDAwMCk7XG5cdFx0XHQvLyBjYWxsIGZ1bmN0aW9uIHRvIHdhaXQgYSBiaXQgYmVmb3JlIHN0YXJ0aW5nIHNpbXVsYXRpb25cblx0XHRcdC8vYXBwLnNpbXVsYXRlKCk7XG5cdFx0fSxcblxuXHRcdHByZXByb2Nlc3M6IChkYXRhKSA9PiB7XG5cdFx0XHR2YXIgdHJhbnNsYXRlID0gKGQpID0+IHtcblx0XHRcdFx0dmFyIHJlcyA9IGQ7XG5cdFx0XHRcdGlmIChyZXMuaGFzT3duUHJvcGVydHkoXCJhdFhcIikgJiYgcmVzLmhhc093blByb3BlcnR5KFwiYXRZXCIpKSB7XG5cdFx0XHRcdFx0cmVzWydhdFgnXSA9IDQqZC5hdFg7XG5cdFx0XHRcdFx0cmVzWydhdFonXSA9IDQqZC5hdFk7IC8vIG1ha2Ugc3VyZSB0byBtb3ZlIHRoZSB5IHByb3BlcnR5IGJlZm9yZSBvdmVycmlkaW5nIGl0XG5cdFx0XHRcdFx0cmVzWydhdFknXSA9IG1fQ29uc3RhbnRzLlNoaXBZT2Zmc2V0O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJlcy54ID0gNCpkLng7XG5cdFx0XHRcdHJlcy56ID0gNCpkLnk7IC8vIG1ha2Ugc3VyZSB0byBtb3ZlIHRoZSB5IHByb3BlcnR5IGJlZm9yZSBvdmVycmlkaW5nIGl0XG5cdFx0XHRcdHJlcy55ID0gbV9Db25zdGFudHMuU2hpcFlPZmZzZXQ7XG5cdFx0XHRcdHJldHVybiByZXM7XG5cdFx0XHR9O1xuXHRcdFx0dmFyIGFjdGlvbnMgPSBbXTtcblx0XHRcdHZhciBpbmRleCA9IDA7XG5cblx0XHRcdC8vIHByZXByb2Nlc3MgaW5pdGlhbCBtYXAgaW5mb3JtYXRpb25cblx0XHRcdC8vIG1fb2NlYW4gPSB7IFwieFwiOiAoKDQqTWF0aC5mbG9vcihkYXRhLm9jZWFuLngvMikpLTIpICsgKG1fQ29uc3RhbnRzLk9jZWFuUGFkZGluZy8yKSxcblx0XHRcdC8vICAgICAgICAgICAgIFwieVwiOiBtX0NvbnN0YW50cy5PY2VhbllPZmZzZXQsIFxuXHRcdFx0Ly8gICAgICAgICAgICAgXCJ6XCI6ICgoNCpNYXRoLmZsb29yKGRhdGEub2NlYW4ueS8yKSkpICsgKG1fQ29uc3RhbnRzLk9jZWFuUGFkZGluZy8yKSwgXG5cdFx0XHQvLyAgICAgICAgICAgICBcIndpZHRoXCI6ICg0KmRhdGEub2NlYW4ueCkrbV9Db25zdGFudHMuT2NlYW5QYWRkaW5nLCBcblx0XHRcdC8vICAgICAgICAgICAgIFwiZGVwdGhcIjogKDQqZGF0YS5vY2Vhbi55KSttX0NvbnN0YW50cy5PY2VhblBhZGRpbmcsIFxuXHRcdFx0Ly8gICAgICAgICAgICAgXCJkZW5zaXR5XCI6IE1hdGgubWluKDMqZGF0YS5vY2Vhbi54LCAzKmRhdGEub2NlYW4ueSkrbV9Db25zdGFudHMuT2NlYW5QYWRkaW5nXG5cdFx0XHQvLyAgICAgICAgIH07XG5cdFx0XHRtX29jZWFuID0geyBcInhcIjogKCg0Kk1hdGguZmxvb3IoZGF0YS5vY2Vhbi54LzIpKS0yKSxcblx0XHRcdFx0XHRcdFwieVwiOiBtX0NvbnN0YW50cy5PY2VhbllPZmZzZXQsIFxuXHRcdFx0XHRcdFx0XCJ6XCI6ICgoNCpNYXRoLmZsb29yKGRhdGEub2NlYW4ueS8yKSkpLFxuXHRcdFx0XHRcdFx0XCJ3aWR0aFwiOiAyMDAsIFxuXHRcdFx0XHRcdFx0XCJkZXB0aFwiOiAyMDAsXG5cdFx0XHRcdFx0XHRcImRlbnNpdHlcIjogMTIwLFxuXHRcdFx0XHRcdH07XG5cblx0XHRcdGNvbnNvbGUubG9nKGRhdGEpO1xuXHRcdFx0Ly8gcHJlcHJvY2VzcyBpbml0aWFsIHNoaXAgaW5mb3JtYXRpb25cblx0XHRcdGRhdGEuc2hpcHMuZm9yRWFjaCgoZW50cnkpID0+IHtcblx0XHRcdFx0bV9zaGlwcy5wdXNoKHRyYW5zbGF0ZShlbnRyeSkpO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIHByZXByb2Nlc3MgYWN0aW9ucyBhbmQgdHVybnMgaW5mb3JtYXRpb25cblx0XHRcdHdoaWxlKGluZGV4IDwgZGF0YS50dXJucy5sZW5ndGgpIHtcblx0XHRcdFx0dmFyIGNoYWluID0gdHJ1ZTtcblx0XHRcdFx0d2hpbGUoY2hhaW4pIHtcblx0XHRcdFx0XHRpZiAoaW5kZXggPT09IGRhdGEudHVybnMubGVuZ3RoKVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRpZiAoYWN0aW9ucy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdGFjdGlvbnMucHVzaCh0cmFuc2xhdGUoZGF0YS50dXJuc1tpbmRleF0pKTtcblx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vIFNoaXAgaWQgYW5kIGFjdGlvbiB0eXBlIGhhcyB0byBiZSB0aGUgc2FtZSB0byBiZSBjb25zaWRlcmVkIGEgY2hhaW4tYWJsZSBhY3Rpb25cblx0XHRcdFx0XHRlbHNlIGlmIChhY3Rpb25zWzBdLmlkID09PSBkYXRhLnR1cm5zW2luZGV4XS5pZCAmJiBhY3Rpb25zWzBdLnR5cGUgPT09IGRhdGEudHVybnNbaW5kZXhdLnR5cGUpIHtcblx0XHRcdFx0XHRcdGlmIChhY3Rpb25zWzBdLnR5cGUgPT09IFwiTU9WRVwiKSB7XG5cdFx0XHRcdFx0XHRcdGFjdGlvbnMucHVzaCh0cmFuc2xhdGUoZGF0YS50dXJuc1tpbmRleF0pKTtcblx0XHRcdFx0XHRcdFx0aW5kZXgrKztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIEZpcmluZyBtdXN0IGJlIGF0IHRoZSBzYW1lIGNvb3JkaW5hdGVzIHRvIGJlIGNvbnNpZGVyZWQgYSBjaGFpbi1hYmxlIGFjdGlvblxuXHRcdFx0XHRcdFx0ZWxzZSBpZiAoYWN0aW9uc1swXS50eXBlID09PSBcIkZJUkVcIiAmJiBhY3Rpb25zWzBdLmF0WCA9PT0gNCooZGF0YS50dXJuc1tpbmRleF0uYXRYKSAmJiBhY3Rpb25zWzBdLmF0WSA9PT0gNCooZGF0YS50dXJuc1tpbmRleF0uYXRZKSkge1xuXHRcdFx0XHRcdFx0XHRhY3Rpb25zLnB1c2godHJhbnNsYXRlKGRhdGEudHVybnNbaW5kZXhdKSk7XG5cdFx0XHRcdFx0XHRcdGluZGV4Kys7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIGlmKGFjdGlvbnNbMF0udHlwZSA9PT0gXCJTSU5LXCIpIHtcblx0XHRcdFx0XHRcdFx0YWN0aW9ucy5wdXNoKHRyYW5zbGF0ZShkYXRhLnR1cm5zW2luZGV4XSkpO1xuXHRcdFx0XHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNoYWluID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0Y2hhaW4gPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gYWRkIGFjdGlvbiBjaGFpbiB0byB2YXJpYWJsZVxuXHRcdFx0XHRtX2NoYWluLnB1c2goe1widHlwZVwiOiBhY3Rpb25zWzBdLnR5cGUsIFwiYWN0aW9uc1wiOiBhY3Rpb25zfSk7XG5cdFx0XHRcdC8vIHJlc2V0IGNoYWluIGFjdGlvbnNcblx0XHRcdFx0YWN0aW9ucyA9IFtdO1xuXHRcdFx0fVxuXHRcdFx0Y29uc29sZS5sb2cobV9jaGFpbik7XG5cdFx0fSxcblxuXG5cblx0XHQvLyBEaXNwbGF5cyB0aGUgb2NlYW4sIGFuZCBzaGlwc1xuXHRcdC8vIFRPRE86IGNoZWNrIHRoZSBlZGdlIGNhc2VzIHdpdGggdGhlIG1hcCBlZGdlcy9zaXplc1xuXHRcdHJlbmRlcjogKHNoaXBEYXRhKSA9PiB7XG5cdFx0XHR2YXIgZG9jID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjZW5lJyk7IC8vIDxhLXNjZW5lPiByZWZlcmVuY2VcblxuXHRcdFx0Ly8gcmUtcG9zaXRpb24gY2FtZXJhOiBjYW1lcmEgbXVzdCBiZSBhbHJlYWR5IHByZXNlbnQgd2hlbiBodG1sIGxvYWRzXG5cdFx0XHR2YXIgY2FtZXJhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbWVyYScpO1xuXHRcdFx0Ly9jYW1lcmEuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIG1fb2NlYW4ueCArIFwiIFwiICsgbV9vY2Vhbi55ICsgXCIgXCIgKyBtX29jZWFuLnopO1xuXHRcdFx0Y2FtZXJhLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBtX29jZWFuLnggKyBcIiBcIiArIG1fb2NlYW4ueSArIFwiIFwiICsgKG1fb2NlYW4ueisoMS41Km1fb2NlYW4ueCkpKTtcblx0XHRcdGNhbWVyYS5zZXRBdHRyaWJ1dGUoJ2NhbWVyYScsICd1c2VySGVpZ2h0OiAnICsgbV9Db25zdGFudHMuQ2FtZXJhWU9mZnNldCk7XG5cdFx0XHRjYW1lcmEuc2V0QXR0cmlidXRlKCdyb3RhdGlvbicsIC1NYXRoLmF0YW4obV9Db25zdGFudHMuQ2FtZXJhWU9mZnNldC8obV9vY2Vhbi56K21fb2NlYW4ueCkpKTtcblxuXHRcdFx0Ly8gR2VuZXJhdGUgTWFwXG5cdFx0XHQvLyBUT0RPOiBQb3NzaWJsZSBlZGdlIGNhc2VzIHdpdGggdGhlIG1hcCBlZGdlIG5vdCBiZWluZyBiaWcgZW5vdWdoXG5cdFx0XHR2YXIgbWFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1vY2VhbicpO1xuXG5cdFx0XHRtYXAuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIG1fb2NlYW4ueCArIFwiIFwiICsgbV9vY2Vhbi55ICsgXCIgXCIgKyBtX29jZWFuLnopO1xuXHRcdFx0bWFwLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBTdHJpbmcobV9vY2Vhbi53aWR0aCkpO1xuXHRcdFx0bWFwLnNldEF0dHJpYnV0ZSgnZGVwdGgnLCBTdHJpbmcobV9vY2Vhbi5kZXB0aCkpO1xuXHRcdFx0bWFwLnNldEF0dHJpYnV0ZSgnZGVuc2l0eScsIFN0cmluZyhtX29jZWFuLmRlbnNpdHkpKTtcblx0XHRcdGRvYy5hcHBlbmRDaGlsZChtYXApO1xuXG5cdFx0XHQvLyBTcGF3biBTaGlwc1xuXHRcdFx0c2hpcERhdGEuZm9yRWFjaCgoZW50cnkpID0+IHtcblx0XHRcdFx0dmFyIHNoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWVudGl0eScpO1xuXG5cdFx0XHRcdHNoaXAuZGF0YXNldC5pZCA9IGVudHJ5LmlkO1xuXHRcdFx0XHRzaGlwLmRhdGFzZXQubmFtZSA9IGVudHJ5Lm5hbWU7XG5cdFx0XHRcdHNoaXAuZGF0YXNldC5vd25lciA9IGVudHJ5Lm93bmVyO1xuXHRcdFx0XHRzaGlwLmRhdGFzZXQueCA9IGVudHJ5Lng7XG5cdFx0XHRcdHNoaXAuZGF0YXNldC55ID0gZW50cnkueTtcblx0XHRcdFx0c2hpcC5kYXRhc2V0LnogPSBlbnRyeS56O1xuXHRcdFx0XHRzaGlwLmRhdGFzZXQuaGVhbHRoID0gZW50cnkuaHVsbDtcblx0XHRcdFx0c2hpcC5kYXRhc2V0Lmh1bGwgPSBlbnRyeS5odWxsO1xuXHRcdFx0XHRzaGlwLmRhdGFzZXQuZmlyZXBvd2VyID0gZW50cnkuZmlyZXBvd2VyO1xuXHRcdFx0XHRzaGlwLmRhdGFzZXQuc3BlZWQgPSBlbnRyeS5zcGVlZDtcblx0XHRcdFx0c2hpcC5kYXRhc2V0LnJhbmdlID0gZW50cnkucmFuZ2U7XG5cblx0XHRcdFx0dmFyIGhlYXJ0ID0gXCJcIjtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBwYXJzZUludChlbnRyeS5odWxsKTsgaSsrKSB7XG5cdFx0XHRcdFx0aGVhcnQgKz0gXCIg4oCiXCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzaGlwLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBlbnRyeS54ICsgXCIgXCIgKyBlbnRyeS55ICsgXCIgXCIgKyBlbnRyeS56KTtcblx0XHRcdFx0c2hpcC5zZXRBdHRyaWJ1dGUoJ3RlbXBsYXRlJywgJ3NyYzogI2JvYXQtdGVtcGxhdGUnKTtcblx0XHRcdFx0Ly8gJHt2YXJpYWJsZX0gPC0gdmFyaWFibGUgbmFtZSBiZSBsb3dlciBjYXNlXG5cdFx0XHRcdHNoaXAuc2V0QXR0cmlidXRlKCdkYXRhLXNoaXBfY29sb3InLCAnY29sb3I6ICcrZW50cnkuY29sb3IrJzsgbWV0YWxuZXNzOiAwLjQ7Jyk7XG5cdFx0XHRcdHNoaXAuc2V0QXR0cmlidXRlKCdkYXRhLXNoaXBfbmFtZScsICd2YWx1ZTogJytlbnRyeS5uYW1lKyc7IGZvbnQ6ICNwbGF5OycpO1xuXHRcdFx0XHRzaGlwLnNldEF0dHJpYnV0ZShtX0NvbnN0YW50cy5TaGlwSGVhbHRoQXR0ciwgJ3ZhbHVlOiAnK2hlYXJ0Kyc7Jyk7XG5cblx0XHRcdFx0dmFyIHNoaXBJbnN0YW5jZSA9IGRvYy5hcHBlbmRDaGlsZChzaGlwKTtcblx0XHRcdFx0bV9lbnRpdHlbZW50cnkuaWRdID0gc2hpcEluc3RhbmNlO1xuXHRcdFx0fSk7XG5cblx0XHR9LFxuXG5cdFx0c2lua1NoaXA6IChkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHR2YXIgZG9jID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjZW5lJyk7XG5cdFx0XHRcdHZhciB0cmFjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cmFjaycpO1xuXHRcdFx0XHR2YXIgc2hpcERvbSA9IG1fZW50aXR5W2RhdGFbMF0uaWRdO1xuXG5cdFx0XHRcdHZhciBkZWJ1ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtZHJhdy1jdXJ2ZScpO1xuXHRcdFx0XHRkZWJ1Zy5zZXRBdHRyaWJ1dGUoJ2N1cnZlcmVmJywgJyN0cmFjaycpO1xuXHRcdFx0XHRkZWJ1Zy5zZXRBdHRyaWJ1dGUoJ21hdGVyaWFsJywgJ3NoYWRlcjogbGluZTsgY29sb3I6IGJsYWNrOycpO1xuXHRcdFx0XHRkb2MuYXBwZW5kQ2hpbGQoZGVidWcpO1xuXG5cdFx0XHRcdHZhciBwb2ludDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWN1cnZlLXBvaW50Jyk7XG5cdFx0XHRcdHZhciBwb2ludDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWN1cnZlLXBvaW50Jyk7XG5cdFx0XHRcdHBvaW50MS5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgZGF0YVswXS54ICsgXCIgXCIgKyBkYXRhWzBdLnkgKyBcIiBcIiArIGRhdGFbMF0ueik7XG5cdFx0XHRcdHBvaW50Mi5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgZGF0YVswXS54ICsgXCIgXCIgKyAoZGF0YVswXS55LW1fQ29uc3RhbnRzLlNpbmtEaXN0YW5jZSkgKyBcIiBcIiArIGRhdGFbMF0ueik7XG5cdFx0XHRcdHRyYWNrLmFwcGVuZENoaWxkKHBvaW50MSk7XG5cdFx0XHRcdHRyYWNrLmFwcGVuZENoaWxkKHBvaW50Mik7XG5cblx0XHRcdFx0c2hpcERvbS5zZXRBdHRyaWJ1dGUoJ2Fsb25ncGF0aCcsICdjdXJ2ZTogI3RyYWNrOyByb3RhdGU6IHRydWU7IGNvbnN0cmFpbnQ6IDAgMSAwOyBkZWxheTogJyttX0NvbnN0YW50cy5XYWl0VGltZUJldHdlZW5BY3Rpb24rJzsgZHVyOiAzMDAwOycpO1xuXG5cdFx0XHRcdHZhciBkb25lID0gKGV2ZW50KSA9PiB7XG5cdFx0XHRcdFx0c2hpcERvbS5yZW1vdmVBdHRyaWJ1dGUoJ2Fsb25ncGF0aCcpO1xuXHRcdFx0XHRcdGlmIChkZWJ1Zy5wYXJlbnROb2RlKSB7XG5cdFx0XHRcdFx0XHRkb2MucmVtb3ZlQ2hpbGQoZGVidWcpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHdoaWxlKHRyYWNrLmhhc0NoaWxkTm9kZXMoKSkge1xuXHRcdFx0XHRcdFx0dHJhY2sucmVtb3ZlQ2hpbGQodHJhY2suY2hpbGROb2Rlc1swXSk7XG5cdFx0XHRcdFx0fVxuXG5cblx0XHRcdFx0XHQvL3NoaXBEb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW92aW5nZW5kZWQnLCBkb25lKTtcblxuXHRcdFx0XHRcdGlmIChzaGlwRG9tLnBhcmVudE5vZGUpIHtcblx0XHRcdFx0XHRcdGRvYy5yZW1vdmVDaGlsZChzaGlwRG9tKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXNvbHZlKGV2ZW50KTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRzaGlwRG9tLmFkZEV2ZW50TGlzdGVuZXIoJ21vdmluZ2VuZGVkJywgZG9uZSk7XG5cdFx0XHRcdC8vIHJlc29sdmUoKTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHQvLyBEYXRhIHBhc3NlZCBpbiBhcmUgb25lIHNoaXBzIGFjdGlvbiBvZiBmaXJpbmcgYXQgb25lIGFuZCBvbmx5IG9uZSBjb29yZGluYXRlXG5cdFx0ZmlyZVNoaXA6IChkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHR2YXIgZG9jID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjZW5lJyk7XG5cdFx0XHRcdHZhciB0cmFjayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0cmFjaycpO1xuXG5cdFx0XHRcdHZhciBidWxsZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLXNwaGVyZScpO1xuXHRcdFx0XHR2YXIgc291cmNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1jdXJ2ZS1wb2ludCcpO1xuXHRcdFx0XHR2YXIgYXJjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1jdXJ2ZS1wb2ludCcpO1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1jdXJ2ZS1wb2ludCcpO1xuXHRcdFx0XHRidWxsZXQuc2V0QXR0cmlidXRlKCdjb2xvcicsICdncmF5Jyk7XG5cdFx0XHRcdGJ1bGxldC5zZXRBdHRyaWJ1dGUoJ3JhZGl1cycsICcwLjEnKTtcblx0XHRcdFx0YnVsbGV0LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBkYXRhWzBdLnggKyBcIiBcIiArIGRhdGFbMF0ueSArIFwiIFwiICsgZGF0YVswXS56KTtcblx0XHRcdFx0c291cmNlLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBkYXRhWzBdLnggKyBcIiBcIiArIGRhdGFbMF0ueSArIFwiIFwiICsgZGF0YVswXS56KTtcblx0XHRcdFx0dGFyZ2V0LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBkYXRhWzBdLmF0WCArIFwiIFwiICsgZGF0YVswXS5hdFkgKyBcIiBcIiArIGRhdGFbMF0uYXRaKTtcblx0XHRcdFx0YXJjLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCAoZGF0YVswXS5hdFgrZGF0YVswXS54KS8yICsgXCIgXCIgKyAoKChkYXRhWzBdLmF0WStkYXRhWzBdLnkpLzIpK21fQ29uc3RhbnRzLkJ1bGxldEFyYykgKyBcIiBcIiArIChkYXRhWzBdLmF0WitkYXRhWzBdLnopLzIpO1xuXHRcdFx0XHR0cmFjay5hcHBlbmRDaGlsZChzb3VyY2UpO1xuXHRcdFx0XHR0cmFjay5hcHBlbmRDaGlsZChhcmMpO1xuXHRcdFx0XHR0cmFjay5hcHBlbmRDaGlsZCh0YXJnZXQpO1xuXG5cdFx0XHRcdHZhciBkZWJ1ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtZHJhdy1jdXJ2ZScpO1xuXHRcdFx0XHRkZWJ1Zy5zZXRBdHRyaWJ1dGUoJ2N1cnZlcmVmJywgJyN0cmFjaycpO1xuXHRcdFx0XHRkZWJ1Zy5zZXRBdHRyaWJ1dGUoJ21hdGVyaWFsJywgJ3NoYWRlcjogbGluZTsgY29sb3I6IHJlZDsnKTtcblx0XHRcdFx0ZG9jLmFwcGVuZENoaWxkKGRlYnVnKTtcblxuXHRcdFx0XHR2YXIgdG1wID0gZG9jLmFwcGVuZENoaWxkKGJ1bGxldCk7XG5cdFx0XHRcdHRtcC5zZXRBdHRyaWJ1dGUoJ2Fsb25ncGF0aCcsICdjdXJ2ZTogI3RyYWNrOyByb3RhdGU6IHRydWU7IGNvbnN0YW50OiAwIDAgMTsgZGVsYXk6IDIwMDsgZHVyOiA1MDAnKTtcblxuXHRcdFx0XHR2YXIgZG9uZSA9IChldmVudCkgPT4ge1xuXHRcdFx0XHRcdHRtcC5yZW1vdmVBdHRyaWJ1dGUoJ2Fsb25ncGF0aCcpO1xuXHRcdFx0XHRcdGlmIChkZWJ1Zy5wYXJlbnROb2RlKSB7XG5cdFx0XHRcdFx0XHRkb2MucmVtb3ZlQ2hpbGQoZGVidWcpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR3aGlsZSh0cmFjay5oYXNDaGlsZE5vZGVzKCkpIHtcblx0XHRcdFx0XHRcdHRyYWNrLnJlbW92ZUNoaWxkKHRyYWNrLmNoaWxkTm9kZXNbMF0pO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vdG1wLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdmluZ2VuZGVkJywgZG9uZSk7XG5cdFx0XHRcdFx0aWYgKHRtcC5wYXJlbnROb2RlKSB7XG5cdFx0XHRcdFx0XHRkb2MucmVtb3ZlQ2hpbGQodG1wKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmVzb2x2ZShldmVudCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0bXAuYWRkRXZlbnRMaXN0ZW5lcignbW92aW5nZW5kZWQnLCBkb25lKTtcblx0XHRcdFx0Ly9yZXNvbHZlKCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWltU2hpcDogKGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0dmFyIHNoaXAgPSBtX2VudGl0eVtkYXRhWzBdLmlkXTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImFpbTogXCIsIHNoaXApO1xuICAgICAgICAgXHRcdFx0cmVzb2x2ZSgpO1xuICAgICAgXHRcdFx0fSwgMzAwMCk7XG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cblx0XHR9LFxuXG5cdFx0aGl0U2hpcDogKGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdHZhciBkb2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NlbmUnKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJ2RhbWFnZTogJywgZGF0YSk7XG5cdFx0XHRcdHZhciBzaGlwID0gbV9lbnRpdHlbZGF0YVswXS5pZF07XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzaGlwSGl0OiAnLCBzaGlwKTtcblxuXHRcdFx0XHR2YXIgaGVhcnQgPSBcIlwiO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFbMF0uaGVhbHRoLTE7IGkrKykge1xuXHRcdFx0XHRcdGhlYXJ0ICs9IFwiIOKAolwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vdmFyIHByZXYgPSBoZWFydCArIFwiIOKAolwiO1xuXHRcdFx0XHRjb25zb2xlLmxvZygnbmV3aHA6ICcsIGhlYXJ0KTtcblx0XHRcdFx0c2hpcC5zZXRBdHRyaWJ1dGUobV9Db25zdGFudHMuU2hpcEhlYWx0aEF0dHIsICd2YWx1ZTogYXNmOycpO1xuXHRcdFx0XHRjb25zb2xlLmxvZygnbmV3U2hpcEhpdDogJywgc2hpcCk7XG5cblx0XHRcdFx0ZG9jLmNoaWxkTm9kZXMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuXHRcdFx0XHRcdFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Ly8gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdC8vIFx0c2hpcC5zZXRBdHRyaWJ1dGUobV9Db25zdGFudHMuU2hpcEhlYWx0aEF0dHIsICd2YWx1ZTogJytoZWFydCsnOycpO1xuXHRcdFx0XHQvLyB9LCAzMDApO1xuXHRcdFx0XHQvLyBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0Ly8gXHRzaGlwLnNldEF0dHJpYnV0ZShtX0NvbnN0YW50cy5TaGlwSGVhbHRoQXR0ciwgJ3ZhbHVlOiAnK3ByZXYrJzsnKTtcblx0XHRcdFx0Ly8gfSwgMzAwKTtcblx0XHRcdFx0Ly8gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdC8vIFx0c2hpcC5zZXRBdHRyaWJ1dGUobV9Db25zdGFudHMuU2hpcEhlYWx0aEF0dHIsICd2YWx1ZTogJytoZWFydCsnOycpO1xuXHRcdFx0XHQvLyB9LCAzMDApO1xuXHRcdFx0XHQvLyBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0Ly8gXHRzaGlwLnNldEF0dHJpYnV0ZShtX0NvbnN0YW50cy5TaGlwSGVhbHRoQXR0ciwgJ3ZhbHVlOiAnK3ByZXYrJzsnKTtcblx0XHRcdFx0Ly8gfSwgMzAwKTtcblx0XHRcdFx0Ly8gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdC8vIFx0c2hpcC5zZXRBdHRyaWJ1dGUobV9Db25zdGFudHMuU2hpcEhlYWx0aEF0dHIsICd2YWx1ZTogJytoZWFydCsnOycpO1xuXHRcdFx0XHQvLyB9LCAzMDApO1xuXHRcdFx0XHQvL3ZhciBwcm9wZXJ0eSA9IHNoaXAuZ2V0XG5cblx0XHRcdFx0cmVzb2x2ZSgpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdC8vIERhdGEgcGFzc2VkIGluIG11c3QgYmUgZm9yIG1vdmVtZW50IG9mIG9uZSBzaGlwXG5cdFx0bW92ZVNoaXA6IChkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXG5cdFx0XHRcdHZhciBzaGlwRG9tID0gbV9lbnRpdHlbZGF0YVswXS5pZF07IC8vIGh0bWwgZWxlbWVudFxuXHRcdFx0XHQvLyBpZiBzdGF0ZW1lbnQgaXMgbm90IHdvcmtpbmdcblx0XHRcdFx0Ly8gaWYgKGRhdGEubGVuZ3RoID09PSAxICYmIGRhdGFbMF0ueCA9PT0gc2hpcERvbS5kYXRhc2V0LnggJiYgZGF0YVswXS56ID09PSBzaGlwRG9tLmRhdGFzZXQueikge1xuXHRcdFx0XHQvLyAgICAgLy8gaWYgc2hpcERvbSB0cmllcyB0byBtb3ZlIGFnYWluc3QgZWRnZSBvciBvY2N1cGllZCBwbGFjZVxuXHRcdFx0XHQvLyAgICAgYWxlcnQoXCJTa2lwcGVkXCIpO1xuXHRcdFx0XHQvLyAgICAgcmVzb2x2ZShcIlNraXBwZWRcIik7XG5cdFx0XHRcdC8vIH1cblxuXHRcdFx0XHR2YXIgZG9jID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjZW5lJyk7IC8vIDxhLXNjZW5lPiByZWZlcmVuY2Vcblx0XHRcdFx0dmFyIHRyYWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyYWNrJyk7XG5cdFx0XHRcdC8vdmFyIHN0YXJ0Q29vcmQgPSB7XCJ4XCI6IGRhdGFbMF0ueH07XG5cblx0XHRcdFx0dmFyIGRlYnVnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1kcmF3LWN1cnZlJyk7XG5cdFx0XHRcdGRlYnVnLnNldEF0dHJpYnV0ZSgnY3VydmVyZWYnLCAnI3RyYWNrJyk7XG5cdFx0XHRcdGRlYnVnLnNldEF0dHJpYnV0ZSgnbWF0ZXJpYWwnLCAnc2hhZGVyOiBsaW5lOyBjb2xvcjogYmx1ZTsnKTtcblx0XHRcdFx0ZG9jLmFwcGVuZENoaWxkKGRlYnVnKTtcblxuXHRcdFx0XHQvLyBhZGQgY3VycmVudCBsb2NhdGlvbiBhcyBhIHN0YXJ0aW5nIHBvaW50IG9mIHRoZSBjdXJ2ZVxuXHRcdFx0XHR2YXIgcG9pbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWN1cnZlLXBvaW50Jyk7XG5cdFx0XHRcdHBvaW50LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBTdHJpbmcoc2hpcERvbS5kYXRhc2V0LnggKyBcIiBcIiArIHNoaXBEb20uZGF0YXNldC55ICsgXCIgXCIgKyBzaGlwRG9tLmRhdGFzZXQueikpO1xuXHRcdFx0XHR0cmFjay5hcHBlbmRDaGlsZChwb2ludCk7XG5cdFx0XHRcdC8vIGFkZCBjaGFpbi1hYmxlIGdvYWwgbG9jYXRpb25zIHRvIHRoZSBjdXJ2ZVxuXHRcdFx0XHR2YXIgcHJldmlvdXMgPSB7J3gnOiBzaGlwRG9tLmRhdGFzZXQueCwgJ3onOiBzaGlwRG9tLmRhdGFzZXQuen07XG5cdFx0XHRcdHZhciB4RGlzdGFuY2UgPSAwO1xuXHRcdFx0XHR2YXIgekRpc3RhbmNlID0gMDtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJNb3Zpbmc6IFwiLCBkYXRhKTtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0cG9pbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWN1cnZlLXBvaW50Jyk7XG5cdFx0XHRcdFx0cG9pbnQuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIGRhdGFbaV0ueCArIFwiIFwiICsgZGF0YVtpXS55ICsgXCIgXCIgKyBkYXRhW2ldLnopO1xuXHRcdFx0XHRcdHhEaXN0YW5jZSArPSBNYXRoLmFicyhkYXRhW2ldLnggLSBwcmV2aW91cy54KTtcblx0XHRcdFx0XHR6RGlzdGFuY2UgKz0gTWF0aC5hYnMoZGF0YVtpXS56IC0gcHJldmlvdXMueik7XG5cdFx0XHRcdFx0aWYgKGkgKyAxIDwgZGF0YS5sZW5ndGggJiYgZGF0YVtpXS54ID09PSBkYXRhW2krMV0ueCAmJiBkYXRhW2ldLnogPT09IGRhdGFbaSsxXS56KSB7XG5cdFx0XHRcdFx0XHRpKys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRyYWNrLmFwcGVuZENoaWxkKHBvaW50KTtcblx0XHRcdFx0XHRwcmV2aW91cyA9IHsneCc6IGRhdGFbaV0ueCwgJ3onOiBkYXRhW2ldLnp9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciBkdXIgPSAoeERpc3RhbmNlK3pEaXN0YW5jZSkqbV9Db25zdGFudHMuV2FpdFRpbWVQZXJUaWxlTW92ZWQ7XG5cdFx0XHRcdHNoaXBEb20uc2V0QXR0cmlidXRlKCdhbG9uZ3BhdGgnLCAnY3VydmU6ICN0cmFjazsgcm90YXRlOiB0cnVlOyBjb25zdHJhaW50OiAwIDAgMTsgZGVsYXk6ICcrbV9Db25zdGFudHMuV2FpdFRpbWVCZXR3ZWVuQWN0aW9uKyc7IGR1cjogJytkdXIrJzsnKTtcblxuXHRcdFx0XHR2YXIgZG9uZSA9IChldmVudCkgPT4ge1xuXHRcdFx0XHRcdC8vIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5VGFnTmFtZSgnYS1kcmF3LWN1cnZlJyk7XG5cdFx0XHRcdFx0Ly8gZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0Ly8gICAgIGxpc3RbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChsaXN0WzBdKTtcblx0XHRcdFx0XHQvLyB9XG5cdFx0XHRcdFx0aWYgKGRlYnVnLnBhcmVudE5vZGUpIHtcblx0XHRcdFx0XHRcdGRvYy5yZW1vdmVDaGlsZChkZWJ1Zyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0d2hpbGUodHJhY2suaGFzQ2hpbGROb2RlcygpKSB7XG5cdFx0XHRcdFx0XHR0cmFjay5yZW1vdmVDaGlsZCh0cmFjay5jaGlsZE5vZGVzWzBdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0c2hpcERvbS5yZW1vdmVBdHRyaWJ1dGUoJ2Fsb25ncGF0aCcpO1xuXHRcdFx0XHRcdHNoaXBEb20uZGF0YXNldC54ID0gZGF0YVtkYXRhLmxlbmd0aC0xXS54O1xuXHRcdFx0XHRcdHNoaXBEb20uZGF0YXNldC56ID0gZGF0YVtkYXRhLmxlbmd0aC0xXS56O1xuXHRcdFx0XHRcdHNoaXBEb20uZGF0YXNldC55ID0gZGF0YVtkYXRhLmxlbmd0aC0xXS55O1xuXG5cdFx0XHRcdFx0Ly9zaGlwRG9tLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdmluZ2VuZGVkJywgZG9uZSk7XG5cdFx0XHRcdFx0cmVzb2x2ZShldmVudCk7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0c2hpcERvbS5hZGRFdmVudExpc3RlbmVyKCdtb3ZpbmdlbmRlZCcsIGRvbmUpO1xuXG5cdFx0XHRcdFxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdHNpbXVsYXRlOiAoKSA9PiB7XG5cdFx0XHRjb25zb2xlLmxvZyhcImNoYWluOiBcIiwgbV9jaGFpbik7XG5cdFx0XHR2YXIgbm90U3RvcCA9IHRydWU7XG5cdFx0XHRpZiAobV9jaGFpbi5sZW5ndGggPT0gMCkge1xuXHRcdFx0XHRub3RTdG9wID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHR2YXIgY3VycmVudCA9IG1fY2hhaW4uc2hpZnQoKTsgLy8gZG9uJ3Qgc2hpZnQgd2hlbiBsZW5ndGggaXMgemVyb1xuXHRcdFx0aWYgKGN1cnJlbnQgJiYgbm90U3RvcCkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcImN1cnJlbnQ6IFwiLCBjdXJyZW50KTtcblx0XHRcdFx0c3dpdGNoKGN1cnJlbnQudHlwZSkge1xuXHRcdFx0XHRcdGNhc2UgXCJNT1ZFXCI6XG5cdFx0XHRcdFx0XHRhcHAubW92ZVNoaXAoY3VycmVudC5hY3Rpb25zKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRcdC8vYWxlcnQoXCJNb3ZlZCBcIiArIG1fY2hhaW4ubGVuZ3RoICsgXCIgYWN0aW9ucyBsZWZ0XCIpO1xuXHRcdFx0XHRcdFx0XHRhcHAuc2ltdWxhdGUoKTtcblx0XHRcdFx0XHRcdH0pLmNhdGNoKChlcnIpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnIpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiRklSRVwiOlxuXHRcdFx0XHRcdFx0YXBwLmZpcmVTaGlwKGN1cnJlbnQuYWN0aW9ucykudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRhcHAuc2ltdWxhdGUoKTtcblx0XHRcdFx0XHRcdH0pLmNhdGNoKChlcnIpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcihcImVycm9yOiBcIiwgZXJyKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcIkhJVFwiOlxuXHRcdFx0XHRcdFx0YXBwLmhpdFNoaXAoY3VycmVudC5hY3Rpb25zKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGFwcC5zaW11bGF0ZSgpO1xuXHRcdFx0XHRcdFx0fSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlIFwiU0lOS1wiOlxuXHRcdFx0XHRcdFx0YXBwLnNpbmtTaGlwKGN1cnJlbnQuYWN0aW9ucykudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHQvL2FsZXJ0KFwiU3VuayBcIisgbV9jaGFpbi5sZW5ndGggKyBcIiBhY3Rpb25zIGxlZnRcIik7XG5cdFx0XHRcdFx0XHRcdGFwcC5zaW11bGF0ZSgpO1xuXHRcdFx0XHRcdFx0fSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycik7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcIlVua25vd24gQWN0aW9uIFR5cGUgXCIgKyBjdXJyZW50LnR5cGUgKyBcIiBpbiBzaW11bGF0ZSBmdW5jdGlvblwiKTtcblx0XHRcdFx0XHRcdGFwcC5zaW11bGF0ZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHQvL2FsZXJ0KFwiU2ltdWxhdGlvbiBEb25lXCIpO1xuXHRcdFx0XHRcdHZleC5kaWFsb2cuYWxlcnQoXCJTaW11bGF0aW9uIENvbXBsZXRlZC5cIik7XG5cdFx0XHRcdH0sIDEwMDAwKTtcblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvKiogdHJhbnNsYXRlcyB0aGUgY29vcmRpbmF0ZSBpbiB0aGUgamF2YSBnYW1lIHRvIHRoaXMgc2NlbmUncyBjb29yZGluYXRlXG5cdFx0XHRKYXZhIEdhbWU6IEVhY2ggc2hpcCBzcGFucyBvbmUgKHgsIHkpIHVuaXRcblx0XHRcdEphdmEgR2FtZTogQ29vcmRpbmF0ZSBzeXN0ZW0gaGFzICgwLCAwKSBhdCB0b3AgbGVmdCBjb3JuZXIgKHdpdGhvdXQgbmVnYXRpdmVzKVxuXHRcdFx0QUZyYW1lIFNjZW5lOiBFYWNoIHNoaXAgbW9kZWwgaXMgYSA0eDQgYm94XG5cdFx0XHRBRnJhbWUgU2NlbmU6IENvb3JkaW5hdGUgc3lzdGVtIGlzICgwLCAwKSBhdCB0aGUgY2VudGVyICh3aXRoIG5lZ2F0aXZlcylcblx0XHQqL1xuXHRcdGdldFN0ckNvb3JkOiAoY29vcmQsIG9mZnNldFkpID0+IHtcblx0XHRcdHJldHVybiAobV9vY2Vhbi54LWNvb3JkLngpKjQgKyBcIiBcIiArIG9mZnNldFkgKyBcIiBcIiArIChtX29jZWFuLnktY29vcmQueSkqNDtcblx0XHR9LFxuXG5cdFx0Z2V0U2hpcHM6ICgpID0+IHtcblx0XHRcdHJldHVybiBtX3NoaXBzO1xuXHRcdH0sXG5cblx0XHRnZXRPY2VhbjogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIG1fb2NlYW47XG5cdFx0fVxuXG5cblx0fVxuXG5cdHJldHVybiBhcHA7XG59XG5cbnZhciBhcHAgPSBiYXR0bGVzaGlwKCk7XG5sZXQgcGFyYW1zID0gZ2V0UXVlcnlQYXJhbXMoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoKTtcblxubGV0IGdldERhdGFGcm9tQ29kZSA9IChjb2RlKSA9PiB7XG5cdGRiLnJlZignZGF2eS1qb25lcy1sb2NrZXIvJyArIGNvZGUpLm9uY2UoJ3ZhbHVlJywgKHNuYXBzaG90KSA9PiB7XG5cdFx0dmFyIGdhbWVEYXRhID0gc25hcHNob3QudmFsKCk7XG5cdFx0aWYgKGdhbWVEYXRhKSB7XG5cdFx0XHRpbnB1dCA9IGdhbWVEYXRhO1xuXHRcdFx0YXBwLmluaXQoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Z2V0Q29kZShgTm8gZGF0YSBmb3IgY29kZSAke2NvZGV9LiBFbnRlciBhbm90aGVyIGNvZGU6YCk7XG5cdFx0XHQvL2FwcC5pbml0KCk7XG5cdFx0fVxuXHR9KS5jYXRjaCgoZXJyKSA9PiB7XG5cdFx0Z2V0Q29kZShgVGhlcmUgd2FzIGFuIGVycm9yLiBFbnRlciBhbm90aGVyIGNvZGU6YCk7XG5cdFx0Ly9hcHAuaW5pdCgpO1xuXHR9KTtcbn1cblxubGV0IGdldENvZGUgPSAobWVzc2FnZSkgPT4ge1xuXHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0bWVzc2FnZTogbWVzc2FnZSxcblx0XHRjYWxsYmFjazogKHZhbHVlKSA9PiB7XG5cdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0dmFyIGNvZGUgPSB2YWx1ZTtcblx0XHRcdFx0Z2V0RGF0YUZyb21Db2RlKGNvZGUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Z2V0Q29kZShcIk5vIGNvZGUgZW50ZXJlZC4gRW50ZXIgeW91ciBjb2RlOlwiKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5pZiAocGFyYW1zLmNvZGUpIHtcblx0Z2V0RGF0YUZyb21Db2RlKHBhcmFtcy5jb2RlKTtcbn0gZWxzZSB7XG5cdGdldENvZGUoXCJFbnRlciBZb3VyIENvZGVcIik7XG59XG5cblxuLy8gdmFyIEJBVFRMRV9TRVJWRVJfVVJMID0gJ2h0dHBzOi8vYmF0dGxlc2hpcC12aW5na2FuLmM5dXNlcnMuaW8vMXYxP3AxPWVzaTE3LmNzLkRlc3Ryb3llclNoaXAmcDI9ZXNpMTcuaGxpMTA5LkZsb2F0ZXInOy8vICsgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMDApO1xuXG4vLyAkLmdldChCQVRUTEVfU0VSVkVSX1VSTCkudGhlbihkYXRhID0+IHtcbi8vIFx0aW5wdXQgPSBkYXRhO1xuLy8gXHRhcHAuaW5pdCgpO1xuLy8gfSkuZG9uZSgoKSA9PiB7XG4vLyBcdGNvbnNvbGUubG9nKFwiRGF0YSBzdWNjZXNzZnVsbHkgcmV0cmlldmVkIGZyb20gc2VydmVyXCIpO1xuLy8gfSkuZmFpbCgoKSA9PiB7XG4vLyBcdGNvbnNvbGUubG9nKFwiVW5hYmxlIHRvIHJldHJpZXZlIGRhdGEsIHN0YXJ0aW5nIHdpdGggbG9jYWwgZGF0YVwiKTtcbi8vIFx0YXBwLmluaXQoKTtcbi8vIH0pO1xuXG5cblxuIl19\n"]}